require("@babel/runtime/helpers/Arrayincludes"),(wx.webpackJsonp=wx.webpackJsonp||[]).push([[592],{6834:function(e,n,t){t.d(n,{h:function(){return W}});var r={};t.r(r),t.d(r,{getUser:function(){return x},login:function(){return I},sendVerifyCode:function(){return A}});var i={};t.r(i),t.d(i,{checkTokenSize:function(){return E},createChat:function(){return Z},createChatShare:function(){return z},createChatShareScreenshot:function(){return L},dragonCreateChat:function(){return O},dragonRedPacket:function(){return B},dragonUpdateChat:function(){return U},feedback:function(){return C},getChat:function(){return k},getChatIdByShare:function(){return G},getChatShare:function(){return Q},listChatExamples:function(){return y},listChatFiles:function(){return b},listChatSegments:function(){return S},listChats:function(){return w},removeChat:function(){return D},stopStream:function(){return T}});var a={};t.r(a),t.d(a,{fileParse:function(){return Y}});var o={};t.r(o),t.d(o,{login:function(){return P},register:function(){return R}});var s=t(4217),c=t(6517),u=t(9868),l=t(6194),d=t.n(l),g=t(6089),h=t(9459),m=t(7765),f=t(5250),v=t(3735);function p(e){return M.apply(this,arguments)}function M(){return(M=(0,u.Z)((0,s.Z)().mark((function e(n){var t,r,i,a,o,u,l,M,A;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.d.getState(),r=t.env,i=t.access_token,a=h.X[r]||h.X.prod,o=a+"/api"+n.url,u={"Content-Type":"application/json","R-Timezone":"Asia/Shanghai","x-msh-platform":"mp","x-msh-version":g.i8},i&&(u.Authorization="Bearer ".concat(i)),e.next=7,d().request((0,c.Z)((0,c.Z)({},n),{},{url:o,data:n.body,header:(0,c.Z)((0,c.Z)({},u),n.headers)}));case 7:if(200===(l=e.sent).statusCode){e.next=16;break}if(401!==l.statusCode){e.next=13;break}return e.next=12,m.d.refreshToken().catch((function(){return f.G.toLogin(),Promise.reject(new Error("RefreshToken error"))}));case 12:return e.abrupt("return",p(n));case 13:return"string"==typeof(A=null==l||null===(M=l.data)||void 0===M?void 0:M.message)&&v.A.show(A),e.abrupt("return",Promise.reject(l));case 16:return e.abrupt("return",l.data);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return p({url:"/user/sms/verify-code",method:"POST",body:e})}function I(e){return p({url:"/auth/login/sms",method:"POST",body:e})}function x(){return p({url:"/user"})}var j=t(5826),N=["chat_id"],_=["chat_id"];function y(){return p({url:"/show_case/list",method:"POST",body:{categories:["default"],offset:0,size:4,enable_cache:!0}})}function w(e){return p({url:"/chat/list",method:"POST",body:e})}function k(e){return p({url:"/chat/".concat(e)})}function Z(e){return p({url:"/chat",method:"POST",body:e})}function D(e){return p({url:"/chat/".concat(e),method:"DELETE"})}function b(e){return p({url:"/chat/".concat(e,"/segment/files"),method:"POST"})}function S(e,n){return p({url:"/chat/".concat(e,"/segment/scroll"),method:"POST",body:n})}function C(e){var n=e.chat_id,t=e.segment_id,r=e.action;return p({url:"/chat/".concat(n,"/segment/").concat(t,"/").concat(r),method:"POST"})}function T(e){var n=e.chat_id,t=(0,j.Z)(e,N);return p({url:"/chat/".concat(n,"/cancel"),method:"POST",body:t})}function E(e){var n=e.chat_id,t=(0,j.Z)(e,_);return p({url:"/chat/".concat(n,"/token_size"),method:"POST",body:t})}function z(e){return p({url:"/chat/share/create",method:"POST",body:e})}function L(e){return p({url:"/chat/share/screenshot",method:"POST",body:e})}function Q(e){return p({url:"/chat/share/".concat(e)})}function O(e){return p({url:"/events/2024-dragon/user_summary",method:"POST",body:e})}function U(e){return p({url:"/events/2024-dragon/tututu_status/".concat(e),method:"PUT",body:{first_tututu_finished:!0}})}function B(e){return p({url:"/events/2024-dragon/dragon?dragon=".concat(e)})}function G(e){return p({url:"/chat/create-chat-by-share",method:"POST",body:e})}function Y(e){return p({url:"/file/parse_process",method:"POST",body:e})}function P(e){return p({url:"/auth/login/wechat/mini",method:"POST",body:e})}function R(e){return p({url:"/user/register/wechat/mini",method:"POST",body:e})}var W={auth:r,chat:i,file:a,wechat:o}},9306:function(e,n,t){t.d(n,{x7:function(){return r},ri:function(){return i},ec:function(){return f},xv:function(){return a},JG:function(){return o},DV:function(){return s},UW:function(){return c},QM:function(){return C},EA:function(){return T},Nd:function(){return E},tP:function(){return j},m8:function(){return u},LE:function(){return l},Nx:function(){return d},dG:function(){return g},qp:function(){return _},xp:function(){return N},V_:function(){return y},jY:function(){return h},L5:function(){return w},Ab:function(){return m},qa:function(){return k},lW:function(){return v},BN:function(){return p},WU:function(){return Z},Gy:function(){return D},sv:function(){return b},I1:function(){return S},sT:function(){return M},ws:function(){return A},iR:function(){return I},DC:function(){return x}});var r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02Ljc1NjI4IDEwLjYwNjFDNi40MTQ1NyAxMC4yNzE0IDYuNDE0NTcgOS43Mjg2NCA2Ljc1NjI4IDkuMzkzOTFMMTIuMDA2MyA0LjI1MTA1QzEyLjM0OCAzLjkxNjMyIDEyLjkwMiAzLjkxNjMyIDEzLjI0MzcgNC4yNTEwNUMxMy41ODU0IDQuNTg1NzkgMTMuNTg1NCA1LjEyODUgMTMuMjQzNyA1LjQ2MzIzTDguNjEyNDQgMTBMMTMuMjQzNyAxNC41MzY4QzEzLjU4NTQgMTQuODcxNSAxMy41ODU0IDE1LjQxNDIgMTMuMjQzNyAxNS43NDg5QzEyLjkwMiAxNi4wODM3IDEyLjM0OCAxNi4wODM3IDEyLjAwNjMgMTUuNzQ4OUw2Ljc1NjI4IDEwLjYwNjFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTgiIGZpbGw9IiM1MzU3NjciLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOCA4QzE1LjIzODYgOCAxMyAxMC4yMzg2IDEzIDEzQzEzIDE1Ljc2MTQgMTUuMjM4NiAxOCAxOCAxOEMyMC43NjE0IDE4IDIzIDE1Ljc2MTQgMjMgMTNDMjMgMTAuMjM4NiAyMC43NjE0IDggMTggOFoiIGZpbGw9IiNFMEVDRkYiIGZpbGwtb3BhY2l0eT0iMC4zIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQuOTk5OSAxOUMxMy4zMzcyIDE5IDExLjczODEgMTkuNzU4NSAxMC44MDExIDIwLjkwMDRDMTAuMzI1NSAyMS40OCA5Ljk5MTEzIDIyLjE5NzEgOS45NjIwMiAyMi45OTE5QzkuOTMyMjkgMjMuODAzNiAxMC4yMjUzIDI0LjU5NTggMTAuODI5NSAyNS4yODcxQzEyLjMwMjEgMjYuOTcxNiAxNC42NTMyIDI4IDE3Ljk5OTkgMjhDMjEuMzQ2NiAyOCAyMy42OTc4IDI2Ljk3MTYgMjUuMTcwMyAyNS4yODcxQzI1Ljc3NDYgMjQuNTk1OCAyNi4wNjc1IDIzLjgwMzYgMjYuMDM3OCAyMi45OTE5QzI2LjAwODcgMjIuMTk3MSAyNS42NzQ0IDIxLjQ4IDI1LjE5ODggMjAuOTAwNEMyNC4yNjE3IDE5Ljc1ODUgMjIuNjYyNyAxOSAyMC45OTk5IDE5SDE0Ljk5OTlaIiBmaWxsPSIjRTBFQ0ZGIiBmaWxsLW9wYWNpdHk9IjAuMyIvPgo8L3N2Zz4K",a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz4KPHBhdGggZD0iTTcuOTk5OTcgOC4wMDAwM0wxNi4xNjE5IDE2LjE2MTlNMTYuMTYxOSA4LjAwMDAzTDcuOTk5OTcgMTYuMTYxOSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjYwNTMxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",o=t.p+"assets/icons/copy.svg",s=t.p+"assets/icons/dislike.svg",c=t.p+"assets/icons/disliked.svg",u=t.p+"assets/icons/history.svg",l="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMy44MTg2IDQuNjY2NEMxMi43NDM5IDMuNzc3ODcgMTEuMjU2MSAzLjc3Nzg3IDEwLjE4MTUgNC42NjY0TDQuNzk1MzkgOS4xMTk2NEM0LjMwNDI1IDkuNTI1NzIgNCAxMC4xNjczIDQgMTAuODY2M1YxOC44NzM5QzQgMTkuNTU0MyA0LjUwNDQzIDIwIDUgMjBIN0M3LjU1MjI4IDIwIDggMTkuNTUyMyA4IDE5VjE1LjY4NDhDOCAxNC4wMTY4IDkuMjg2NDMgMTIuNTU4NyAxMSAxMi41NTg3SDEzQzE0LjcxMzYgMTIuNTU4NyAxNiAxNC4wMTY4IDE2IDE1LjY4NDhWMTlDMTYgMTkuNTUyMyAxNi40NDc3IDIwIDE3IDIwSDE5QzE5LjQ5NTYgMjAgMjAgMTkuNTU0MyAyMCAxOC44NzM5VjEwLjg2NjNDMjAgMTAuMTY3MyAxOS42OTU4IDkuNTI1NzIgMTkuMjA0NiA5LjExOTY1TDEzLjgxODYgNC42NjY0Wk0xNS4wOTMgMy4xMjUwMkwyMC40NzkgNy41NzgyN0MyMS40NDk0IDguMzgwNTkgMjIgOS41OTcwNiAyMiAxMC44NjYzVjE4Ljg3MzlDMjIgMjAuNTQxOSAyMC43MTM2IDIyIDE5IDIySDE3QzE1LjM0MzEgMjIgMTQgMjAuNjU2OSAxNCAxOVYxNS42ODQ4QzE0IDE1LjAwNDQgMTMuNDk1NiAxNC41NTg3IDEzIDE0LjU1ODdIMTFDMTAuNTA0NCAxNC41NTg3IDEwIDE1LjAwNDQgMTAgMTUuNjg0OFYxOUMxMCAyMC42NTY5IDguNjU2ODUgMjIgNyAyMkg1QzMuMjg2NDMgMjIgMiAyMC41NDE5IDIgMTguODczOVYxMC44NjYzQzIgOS41OTcwNiAyLjU1MDU5IDguMzgwNTkgMy41MjA5NyA3LjU3ODI3TDguOTA3MDMgMy4xMjUwMkMxMC43MjEzIDEuNjI0OTkgMTMuMjc4NyAxLjYyNDk5IDE1LjA5MyAzLjEyNTAyWiIgZmlsbD0iI0ZFRkJGRiIvPgo8L3N2Zz4K",d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiByeD0iNyIgZmlsbD0iIzI2NzJFRCIvPgo8cmVjdCB4PSI0IiB5PSI2IiB3aWR0aD0iNiIgaGVpZ2h0PSIyIiByeD0iMC41IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",g="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTcgMTVIMTdNNyAxMkgxNyIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iMyAzIi8+CjxwYXRoIGQ9Ik0zLjYyNSA4LjVDMy42MjUgNi45MTIxOCA0LjkxMjE4IDUuNjI1IDYuNSA1LjYyNUgxNy41QzE5LjA4NzggNS42MjUgMjAuMzc1IDYuOTEyMTggMjAuMzc1IDguNVYxNS41QzIwLjM3NSAxNy4wODc4IDE5LjA4NzggMTguMzc1IDE3LjUgMTguMzc1SDYuNUM0LjkxMjE4IDE4LjM3NSAzLjYyNSAxNy4wODc4IDMuNjI1IDE1LjVWOC41WiIgc3Ryb2tlPSIjRDJEM0Q0IiBzdHJva2Utd2lkdGg9IjEuMjUiLz4KPC9zdmc+Cg==",h=(t.p,t.p,t.p+"assets/icons/logo.svg"),m="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNi4yNSAxLjY2NjVWMy43NDk4NEgxOC4zMzMzVjUuMTM4NzNIMTYuMjVWNy4yMjIwNkgxNC44NjExVjUuMTM4NzNIMTIuNzc3N1YzLjc0OTg0SDE0Ljg2MTFWMS42NjY1SDE2LjI1Wk0zLjc1IDE1LjU1NTRWMTguMzMzMkw3LjQ1NDE3IDE1LjU1NTRIMTIuMDgzM0MxMi44NSAxNS41NTU0IDEzLjQ3MjIgMTQuOTMyNSAxMy40NzIyIDE0LjE2NjVWNy45MTY1QzEzLjQ3MjIgNy4xNDk4NCAxMi44NSA2LjUyNzYyIDEyLjA4MzMgNi41Mjc2MkgzLjA1NTU2QzIuMjg4ODkgNi41Mjc2MiAxLjY2NjY2IDcuMTQ5ODQgMS42NjY2NiA3LjkxNjVWMTQuMTY2NUMxLjY2NjY2IDE0LjkzMjUgMi4yODg4OSAxNS41NTU0IDMuMDU1NTYgMTUuNTU1NEgzLjc1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",f="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNCAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeT0iMC4xMjIwNyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiByeD0iNyIgZmlsbD0iIzI2NzJFRCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTkuODIyNzIgNC4yNTkyM0M5LjYxNTY3IDQuMDUyODIgOS4yNzY0NyA0LjA2NzMxIDkuMDg3NzggNC4yOTA2NEw1Ljk4NTkgNy45NjE5NUw0Ljg2MTg2IDYuNzg4MTZDNC42Njc4OSA2LjU4NTYgNC4zNDUyNyA2LjU4MjE3IDQuMTQ3MDQgNi43ODA1N0wzLjc5MzgxIDcuMTM0MUMzLjYwMTY3IDcuMzI2NCAzLjU5ODM3IDcuNjM2OTkgMy43ODYzOSA3LjgzMzMyTDUuNjM3NTkgOS43NjY0NkM1Ljc4Mzk3IDkuOTE5MzIgNi4wMDM1OSA5Ljk1ODc4IDYuMTg3NzQgOS44ODM2OUM2LjI4OTY3IDkuODYwNTkgNi4zODU0NCA5LjgwNTQgNi40NTg1OSA5LjcxODgyTDYuNzM3ODMgOS4zODgzMkw3LjA1MTM0IDkuMDc0NTRMNy4wMjU2MyA5LjA0NzY5TDEwLjIwMzMgNS4yODY2M0MxMC4zNzEzIDUuMDg3ODcgMTAuMzU4NyA0Ljc5MzU0IDEwLjE3NDQgNC42MDk4NEw5LjgyMjcyIDQuMjU5MjNaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",v="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9IiMyNzY3RTQiLz4KPHBhdGggZD0iTTEyLjc1NzYgMThIMTEuMjQyNFY4LjkwMDUyTDcuMDcxNDQgMTMuMDcxNEw2IDEyTDEyIDZMMTggMTJMMTYuOTI4NiAxMy4wNzE0TDEyLjc1NzYgOC45MDA1MlYxOFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",p=t.p+"assets/icons/share.svg",M="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9IiMyNzY3RTQiLz4KPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjgiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",A=t.p+"assets/icons/upload.svg",I=t.p+"assets/icons/voice.svg",x="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiByeD0iMiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",j=t.p+"assets/images/file.png",N=t.p+"assets/images/kimi-latest.png",_=t.p+"assets/images/kimi.png",y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALRSURBVHgB7Vm7bhQxFD3DIyIhhPCm4LEV0NEgKJHYf0AUhM0P8Cs0qSiQeCMBQvwCLRIBeh6LQAIJBHQJUWaHczV21pnNeq4n8UZKfKQje0fX955re2yvB0hIWBcyREJRFIdY3CR75FyWZX8QATsQD5dISeIgeRGREDMBQYHIiJlAhohT1CL2CAiijoIqAb6Qk+R5NIOMQlASjHWY3Kex3aVwdpzFbXKC9ftcTR4gDKHir7A4Sy6w/pjxlnz2mhGYJKeM7QydzkCPoPfAES9L726Uq5gXtQmwBz6wuGdshTcCk1DBiD+HUnxOvmHs73XtVO8AHd1FmcRO9Efiek2z31abU18T9NVG2fMiXBKYZ8x5aLQhAAw0y6LjBJJ34qHHXjazgjavPTYi/gwaiBcEr9OVJISSxCM0AH3JDn3B8SXT5m2Ij+B9wEynFyink7CD5hDxy4bB4gWNNjIGmkOZhCzDL9EcIthOm2DxCQkJWwCr9gGuyydYXHUfYfA0+Y0rxjNEgDk47qkx+8H4i/ZH9TT6nDyFQeFFJRB9ZE+xgaDPYyiPEwPxnGei6Si5srNXE7BnHYthO3WMf1oicKni3+1E+yzHMCHshZMsrmFQYOE8+8ref4IIYPwjLMYwRJ/BT8b/h4SEhG0Orhjy3/gX+ZGcRgOw3bi5QtmLUYIBO+QymZvyMhqA7abIAyNNwojPHa5nBMbI/SNLwul5SxHf8tjPSpsan9UkJhADQ3q+5bEX8RaaJGQ6Tct3hZCR0N6NioA76J9LumSbW3rX0+y0sRe2PHYw14eLxlbOOuPakdD+qb+F/rmki3rxq/SpjMokFsxPm0Tt3a02gXem/IJw8erLXSeJnkMvajM0jttmqXzP+l/oYU+x6uO3nDRlgWC1x3pt8qoEjONXCIcVHnTFzli51jZ9I1MgahLqKdQQ0T/yRYNscuRn8pNvw0tI2GT8B9gunVO4RCqgAAAAAElFTkSuQmCC",w=t.p+"assets/images/network.png",k=t.p+"assets/images/qa.png",Z=(t.p,t.p,t.p,t.p+"assets/share/copy.svg"),D=t.p+"assets/share/image.svg",b=t.p+"assets/share/url.svg",S=t.p+"assets/share/wechat.svg",C=t.p+"assets/dragon/header.png",T=t.p+"assets/dragon/login.png",E=t.p+"assets/dragon/main.png"},3117:function(e,n,t){t.d(n,{E:function(){return o}});var r=t(9306),i=t(427),a=t(1527);function o(e){var n=e.size,t=void 0===n?24:n,o=e.direction,s=void 0===o?"left":o;return(0,a.jsx)(i.b,{src:r.x7,className:"arrow ".concat(s),style:{width:t,height:t}})}},3946:function(e,n,t){t.d(n,{X:function(){return l}});var r=t(9306),i=t(3557),a=t(427),o="index-module__checked___DfS3C",s="index-module__round___gK6jL",c="index-module__disabled___GhlKk",u=t(1527);function l(e){var n=e.checked,t=e.onChange,l=e.indeterminate;return e.disabled?(0,u.jsx)(i.E,{className:c}):(0,u.jsx)(i.E,{onClick:function(){return null==t?void 0:t(!n)},children:n||l?(0,u.jsx)(a.b,{src:l?r.Nx:r.ec,className:o}):(0,u.jsx)(i.E,{className:s})})}},5382:function(e,n,t){t.d(n,{h:function(){return x}});var r=t(6194),i=t.n(r),a=t(3117),o=t(3557),s=t(5279),c="index-module__header___zWDI6",u="index-module__left___Zoq0w",l=t(1527),d=i().getSystemInfoSync(),g=d.windowWidth,h=d.statusBarHeight,m=void 0===h?0:h,f=i().getMenuButtonBoundingClientRect(),v=f.top-m,p=f.height+2*v,M=f.top-v,A=g-f.right,I=(g-f.width)/2;function x(e){var n=e.title,t=void 0===n?"Kimi":n,r=e.onBack,i=e.renderLeft;return(0,l.jsxs)(o.E,{center:!0,className:c,style:{marginTop:M,height:p},children:[r&&(0,l.jsx)(o.E,{center:!0,className:u,style:{left:A},onClick:r,children:(0,l.jsx)(a.E,{})}),i&&(0,l.jsx)(o.E,{center:!0,className:u,style:{left:A},children:i}),(0,l.jsx)(s.G,{mode:"title",ellipsis:!0,style:{maxWidth:I},children:t})]})}},7451:function(e,n,t){t.d(n,{g:function(){return s}});var r=t(9306),i=t(427),a="index-module__loading___jJa4h",o=t(1527);function s(){return(0,o.jsx)(i.b,{src:r.V_,className:a})}},7543:function(e,n,t){t.d(n,{e:function(){return c}});var r=t(6517),i=t(5826),a=t(7524),o=t(1527),s=["type","round"];function c(e){var n=e.type,t=void 0===n?"default":n,c=e.round,u=(0,i.Z)(e,s);return(0,o.jsx)(a.zx,(0,r.Z)((0,r.Z)({},u),{},{className:"button press ".concat(c?"round":""," ").concat(t," ").concat(u.className)}))}},427:function(e,n,t){t.d(n,{b:function(){return m}});var r=t(6517),i=t(4562),a=t(5826),o=t(6194),s=t.n(o),c=t(7524),u=t(959),l=t(3557),d=t(7451),g=t(1527),h=["preview","loadLoading"];function m(e){var n=e.preview,t=e.loadLoading,o=(0,a.Z)(e,h),m=(0,u.useState)(!1),f=(0,i.Z)(m,2),v=f[0],p=f[1];return(0,g.jsxs)(l.E,{notshrink:!0,style:{position:"relative"},children:[t&&!v&&(0,g.jsx)(l.E,{center:!0,className:"image-loading",children:(0,g.jsx)(d.g,{})}),(0,g.jsx)(c.Ee,(0,r.Z)((0,r.Z)({},o),{},{className:"image ".concat(o.className),onClick:function(e){var t;null==o||null===(t=o.onClick)||void 0===t||t.call(o,e);var r=o.src;n&&null!=r&&r.startsWith("https")&&s().previewImage({current:r,urls:[r]})},onLoad:function(e){var n;null==o||null===(n=o.onLoad)||void 0===n||n.call(o,e),t&&p(!0)}}))]})}},4814:function(e,n,t){t.d(n,{R:function(){return g}});var r=t(6517),i=t(5826),a=t(7524),o=t(959),s=t(5279),c=t(3557),u=t(1527);function l(e){var n=e.title,t=void 0===n?"暂无数据":n;return(0,u.jsx)(c.E,{full:!0,center:!0,children:(0,u.jsx)(s.G,{bold:!0,children:t})})}var d=["store","renderItem","keyExtractor","refresherEnabled","safe","listContainer","empty","header","footer"],g=function(e){var n=e.store,t=e.renderItem,g=e.keyExtractor,h=void 0===g?"id":g,m=e.refresherEnabled,f=e.safe,v=e.listContainer,p=e.empty,M=e.header,A=e.footer,I=(0,i.Z)(e,d),x=n||{},j=x.items,N=x.loading,_=x.loadingMore;return 0===(null==j?void 0:j.length)&&!N&&!_?"string"==typeof p?(0,u.jsx)(l,{title:p}):p:(0,u.jsx)(c.E,{full:!0,hidden:!0,children:(0,u.jsx)(a.pf,(0,r.Z)((0,r.Z)({scrollY:!0,style:{height:"100%"},refresherEnabled:m,refresherDefaultStyle:"white",refresherBackground:"#16161a",refresherTriggered:N},I),{},{children:(0,u.jsxs)(c.E,(0,r.Z)((0,r.Z)({column:!0},v),{},{children:[M,null==j?void 0:j.map((function(e,n){return(0,u.jsx)(o.Fragment,{children:t({item:e,index:n})},e[h])})),_&&(0,u.jsx)(c.E,{padding:!0,center:!0,children:(0,u.jsx)(s.G,{mode:"tips",children:"加载中..."})}),A,f&&(0,u.jsx)(c.E,{safe:!0})]}))}))})}},5279:function(e,n,t){t.d(n,{G:function(){return c}});var r=t(6517),i=t(5826),a=t(7524),o=t(1527),s=["full","bold","center","ellipsis","numberOfLines","type","mode"];function c(e){var n=e.full,t=e.bold,c=e.center,u=e.ellipsis,l=e.numberOfLines,d=e.type,g=void 0===d?"default":d,h=e.mode,m=void 0===h?"text":h,f=(0,i.Z)(e,s);return(0,o.jsx)(a.xv,(0,r.Z)((0,r.Z)({},f),{},{className:["text",n&&"full",t&&"bold",c&&"center",u&&"ellipsis",void 0!==l&&"numberOfLines",g&&"type-".concat(g),m&&"mode-".concat(m),f.className].join(" "),style:(0,r.Z)({lineClamp:l,WebkitLineClamp:l},f.style)}))}},3557:function(e,n,t){t.d(n,{E:function(){return c}});var r=t(6517),i=t(5826),a=t(7524),o=t(1527),s=["relative","safe","full","notshrink","hidden","wrap","column","background","border","rounded","center","gap","margin","padding"];function c(e){var n=e.relative,t=e.safe,c=e.full,u=e.notshrink,l=e.hidden,d=e.wrap,g=e.column,h=e.background,m=e.border,f=e.rounded,v=e.center,p=e.gap,M=e.margin,A=e.padding,I=(0,i.Z)(e,s);return(0,o.jsx)(a.G7,(0,r.Z)((0,r.Z)({},I),{},{className:["view",n&&"relative",t&&"safe",c&&"full",u&&"notshrink",l&&"hidden",d&&"wrap",g&&"column",h&&"background",m&&"border-".concat(m),f&&"rounded-".concat(f),v&&"center-".concat(v),p&&"gap-".concat(p),M&&"margin-".concat(M),A&&"padding-".concat(A),I.className].join(" ")}))}},6089:function(e,n,t){t.d(n,{rz:function(){return s},WI:function(){return l},tq:function(){return h},Ar:function(){return d},i8:function(){return g}});var r,i,a=t(6194),o=t.n(a),s="prod",c=o().getSystemInfoSync(),u=o().getAccountInfoSync(),l=!1,d="release"===(null==u||null===(r=u.miniProgram)||void 0===r?void 0:r.envVersion),g=(null==u||null===(i=u.miniProgram)||void 0===i?void 0:i.version)||"1.4.11",h=["ios","android","devtools"].includes(c.platform)},9459:function(e,n,t){t.d(n,{X:function(){return r},z:function(){return i}});var r={prod:"https://kimi.moonshot.cn",test:"https://web-kimi-out.msh.team"},i={prod:"wss://kimi.moonshot.cn",test:"wss://web-kimi-out.msh.team"}},1314:function(e,n,t){t.d(n,{Q:function(){return d},v:function(){return g}});var r=t(4217),i=t(7749),a=t(9868),o=t(3700),s=t(6517),c=t(6596),u=t(9360),l=t(1786);function d(e){var n=e.state,t=e.actions,r=(0,u.Ue)((0,l.n)((function(){return n})));return(0,s.Z)({useState:r,getState:r.getState,resetState:function(){return r.setState(n)}},t({getState:r.getState,setState:r.setState}))}function g(e){var n=e.key,t=void 0===n?"id":n,u=e.fetcher,l=d({state:{loading:!1,loadingMore:!1,size:50,total:0,items:[],searchParams:{}},actions:function(e){var n=e.getState,d=e.setState;return{updateLoading:function(e,n){d((0,o.Z)({},e,n))},updateList:function(e){d(e)},load:function(){var e=arguments;return(0,a.Z)((0,r.Z)().mark((function a(){var s,l,g,h,m,f,v,p,M,A,I,x,j;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:{},l=s.offset,g=void 0===l?0:l,h=s.searchParams,m=0===g?"loading":"loadingMore",f=n(),v=f.size,p={offset:g,size:v,searchParams:h},d((0,o.Z)((0,o.Z)({},m,!0),"searchParams",h)),r.next=7,u(p).finally((function(){return d((0,o.Z)({},m,!1))}));case 7:return M=r.sent,A=M.total,I=void 0===A?0:A,x=M.items,j=void 0===x?[]:x,d((function(e){e.total=I,e.items=0===g?j:(0,c.Z)([].concat((0,i.Z)(e.items),(0,i.Z)(j)),t)})),r.abrupt("return",M);case 11:case"end":return r.stop()}}),a)})))()},loadmore:function(){return(0,a.Z)((0,r.Z)().mark((function e(){var t,i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n(),i=t.items,a=t.total,o=t.loading,s=t.loadingMore,!(i.length>=a||o||s)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",l.load({offset:i.length}));case 4:case"end":return e.stop()}}),e)})))()},addItem:function(e,n){d((function(t){t.items[e](n)}))},updateItem:function(e,r){var i=n().items,a=i.findIndex((function(n){return n[t]===e})),o=i[a];o&&d((function(e){"function"==typeof r?r(e.items[a]):e.items[a]=(0,s.Z)((0,s.Z)({},o),r)}))},removeItem:function(e){d((function(n){n.items.filter((function(n){return n[t]!==e}))}))}}}});return l}},2506:function(e,n,t){t.d(n,{r:function(){return a}});var r=t(959),i=t(4618);function a(e){var n=e.name;(0,r.useEffect)((function(){return function(){i.UO.app.closePage(n)}}),[])}},2535:function(e,n,t){t.d(n,{a:function(){return s}});var r=t(959),i=t(427),a={excel:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA8CAYAAAAkNenBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANkSURBVHgB7ZlPSFRBHMd/M665kdUKUutFjDomZh36Q8TqJQgiyJMSSB4i87KdFCqwLulFvYiHoBSiTmLhpS4qIdVN7ZKU4LZUaPlnpT9u7rqv+b3d93pv/zmPnefOs/3Ag51lln2fN9/5zewsAcap8c6qSDF5xF4eY5cH8kzo05fA8scPtaHOiRDvZ2hCYoq99oEEEkgsEqmCKBmx8hnKJPpAEoEkfJ479b28nSm7LoGsKIrfc8vn5+lKQXYI6fXc9vm26ia/iAoZ8XT6qrL1cIgIm8ObZJzJZJzLThFh8wWyVjLniMTJWMmcJpKxkjlPBElTyZwpomKuZFKKUJeLp5upkkkpUrKvlK+joZKRE5N3FZCQX9+WYPn9HETWw1t3JqSPawzzwZ4D5erFid/Bk93MjhGxFK21wGdYmQtALBoFu3DtdoP3+FEo2cs54RNwj0iUTbql2TlbJbTv+f5uFqzCLbK+wv3zOWf+/PgJVilMdtn4P6tWOs4eqoHRln8/EYKhBTjXfw3Wwqk5b69rho76Zr3dPT4EXWNDIIKcR2RyfgYG3gzr7UqPF66faUjph+8bJYKhRWESiJBodbMbCq4u6u3W0w2w321eB9oNEsjFhzdBJEJEMEZtI116GyUwRhqNteehiV0aGKng6gKIRNhkT45YK4tXdcVhVaqjzr5IaRDvlZNc2/jN0iKIlJdk7YM3/erGA6gsO6i2UW5yfto0N2p6mrhGwx34DVYQWn6TI4YVLblKiY6UhvB1JDliGnZFSsOWBTG5YsVRMrwvBuEixgqFo6CB64ixkolGqAje7P0LbXq7e2wwpZLhvLEDoSKjLT16fHA0nky9VBdL43al/3K7LRETJoKxqSzz6m1t5UYJrFYadkVMiEh1xRFTmcWRMJbZgdfD5i2MDRHLWQSf8OPGe3obI2UcAQ3j+oKIjljOIrgZNEbq6dSLtItefJWf0dv4AFBGFEK3KCLJ6xYln1AgEACnwxyoeqLN0zcq5Vl3HObAHS0ajgHd2B4ZVygCVrF0+LDr6zrE3EWguAjYBd2IAWGXVSyfotDwJshI4YBONgoislEQkY2CiGzsHBECyvb9OWgjVAE6DQ5HUeA5Zbutq04eFbx3Ukz8dGHwbUBx0Vq2QX8GDiLx8Cfw3tHhL/4DN8jN8pv0AAAAAElFTkSuQmCC",loading:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABACAYAAABY1SR7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGRSURBVHgB7do9TsMwGMbx18bhozB0QkJiyBHSG/QGVCKMhXSkZcjK1GyM7Q3KDVpuwA3gCB2YUaRutLZxCkjls2bqY+n9SV2cN1L/SiwvEeQUxU28EHJEQiZEtk4bVpaz6dPzrDG5HZa+98hlhFQPJEQTIaKyMDqO9Hzwn3uklltDlIBVVtgsbV/mvvPSEp0QKiEGaXbV9BmVBE4YM2plebxuDj7EvTGxMvPxujn4kDc2Sdu9Pzd/ICGOsPlpp3fx2+VwQhyh7fAs6yY/XQsqxKmTobHb/N+Oi9BClps/0i+jr+vBhVSsoFZ63u2vrgUZ8q5YPSwhQ6T0/FvGjD8OS8iQ3Z1t39F6dVhWmx8ypLa3S8dHhxQp5TFtE6XnfZ/JjTjYry1/nvKQN/snHIKGQ9BwCBoOQcMhaDgEDYeg4RA0HIKGQ9BwCBoOQcMhaDgEDYeg4RA0HIKGQ9BwCBoOQcMhaFyI8P7+HJkkax4pcNbSnVTWdAJ/KmVkdS6L4nqqzKLhFiYUltI9intldKNqeAUu6mbFP0We2wAAAABJRU5ErkJggg==",other:t.p+"assets/files/other.png",pdf:t.p+"assets/files/pdf.png",ppt:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA8CAYAAAAkNenBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALfSURBVHgB7Zq/TxNhGMe/78vdFVsjsIjGgcbFiSiL0cV0ICYGDe7GwUUXhzpJ4kICJm7wF8gixkQTYNBJIwmDEQdN3YyQYkxIERSwLfej977eWyKxBep7elfeg/skl/Ztn0veT9/3+7y5pAQefGwgjQQfA8cZb9iOPcZZX86XCnM9HYPTq7L30KqEwd97EhkoIFGFuWldS034uYVCd0ehikANPFMc7huRraYgtB/KwrPF4UtZmUoK5SEjP4cuZ/5WFQERT4WwiY3Bq+lGNZEQ8Whnuv36x2Bm1yxHRQSco2Eni4zIJrt3soiJCHbuZBEUEWzvZBEV2d7JlBQhtEWmrKaTqSliHJKq+7OTET5+l0NBKuV1OCuLYBVbopqMalAULXmkekmSjWzY69k3Ir62VmVtGfbqEjhzERZUM5Do7AI1Wv3dJ1vIvdBZ3xdDlRCIcFvfvsIv0iKuWUKzYPYG/HIwM9KI1L3nDb9nhXkwL1/s0xs4uZcImqatCO08Ce3UORhX7iB5+yFo21EEyZ5sLdLWidbrD0ASKQRFaCe7+WgAfK2wOUgcRktXN/QL17YmL2T0s/2wZx4jCEJbESFRzYS4vHw4s1Owng7V1GinexEUTd1a7sLHmrFYlaBoqgitmzgP8GzS3r54JlXY0d6GE8eP4V8R2TAu3qz5jBfmdq2XnddvQgu73nsLsIqbAxH2dPe2LlXJvUJQhCYizoxGODPjgR6MTX+wYgu5asutD/7/EppIZXZyK8zcKnvvi2BfctV2HAahiTjvpkKb9E7Ej7qqEYuoRvyEWE/pfh/2kv20tXgekYfnPRGSlim1bQfqQtLSW6tULsO0TDSDpeUV+MVX2D/PLyCVTMIwdITFhmnBNP3/YL67lliZUhnKER+IqhGLqEYsohqxiGrsHxEOSP+3VmUoAT4g4jCOKcpd90aUV4UTrBLmZun5J/k8XLcHBJOIEELAe5lGxe0RDr8ABL0HsoNn63EAAAAASUVORK5CYII=",txt:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA8CAYAAAAkNenBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGfSURBVHgB7dqxSsNQFMbx79xYZ+muRPAB7OzSN2hmN2cF8xwuzdDdzbXVyU0HXVz0AQRLFZysUWktaHLNRRRabb1XiJ4L57cVTqB/mnsKaQmFhViHgda7GnrVvMQ/Gz0NusP+XQ2d5dT2GmUilM7Pi4g6GEQYOtchUGm7XKOCPEvAJGBCHdFN03ZYaaIG+IqLmNhmUIG/JqLr+k9DPoQUqI3oNpw14UmIOcPZEaKrqWfZlxAjnLXJfAoxpm4y30KMbzeZjyHGl03mawgmNxnLEEVkMza2yViGBPMV29HwY5NRdTvTYOhlOMLg/hH5a2YznrANceXxYR8nIdzMuQwvVQlrKyjV6SXQ67sfW6cQE9Fat9rxv7a5p9E7gzM5I9yU9j1ysKU+z9NJcd83WjnKJLcWNxLCjYRwIyHcSAg3EsKNhHAjIdxICDcSwo2EcOP0pNHFzmGOxer7U8mHZ5SutBDzLAv4u59e5IxwIyHcSAg3EsKNCbH+by1nikAX8Jwmva8yog34/amkGkGs0oS6OamaBnXgl7S4m47NezcNb+dQcHAEZkdFAAAAAElFTkSuQmCC",url:t.p+"assets/files/url.png",warning:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABACAYAAABY1SR7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALFSURBVHgB7ZrPTxNBFMe/s1sKVJQajYkH4v4JpUIC4qFnTRT/ABHwwrEnD8aEXvQKRy+mxn+gcCi9cjEe4YomhoDGaGnSaGhNu+xzp4mmP7btEvctM00/SS87s9n97Js3b3a6Ai7fltcsEsgSKAGIOC6Yk1Lp8PNRcfrR/m7Z7zmGlHAE7RGQUkFCYtu2FTVrG+c5x7AFNlURaEYAyzvJ+bTf/oYBPISqCLFRmJlL+elqQHGIjGxhLmX166e8iIvl1Gu5fp10EJH5ktiZWeiZ/FqINCBKF24vPOnWrI+Ii1vnNvOzswmvNq1EXOLCGcnlEqmOcqGbiMQaNWvZ9oM6ikgWC8k7680HdBWBuzbMNBdLJUVM0/TVzy2Wub/FUkmR8bFxv13jsljK5FdSZGLiEqxbFqLRaN++sliORurrESjK5OSVxs8naW2TvZ2BEQl8aJnXr+FG5jlELNZy/OykhB+ZV6BKBRwEHhHDFWiXkEhBI+Z7Njr/dREwDtMT70eoOeJUquAicJFeOUCM0WIYWnxPvRehDS05a3HCIsJ9016EFhGnyjubsYh4JTUx5w6LiFMNP+F5InLaKeLoGJEzj4g4pxqKeEGDkuxaDq2LqO4hRkTDoeU1/WpZR7zQMiJ2sXOtxR0R8XVljcBAxH21bcZmXkiy7WvZIa+AWXNERqU9MmzXAgNjyQSurj7+t5si309+bedRef8BXAQuErs7j/jqUssxuRUUf7rUKJS/9/bBQeBD6/KD+93bFu+Bi0BF5Aac2SMnRqamerb/17URMlzrsEBF5E3WDj52ba8fH+uz9/tzK9+1rfzmHbgIXERG5PuzFy2RqR18QjHzEvWjL+CCbYkSNsN/rFRjKKIaQxHVGIqoxiCJkO/vz1XGEBA8r2xhQtg2BGFF76hQ2ZBfB918+/rQIDENoi1oBZWJsCvvXTr8AeDp885p9fZPAAAAAElFTkSuQmCC",word:t.p+"assets/files/word.png"},o=t(1527);function s(e){var n=e.data,t=e.width,s=void 0===t?25:t,c=30*s/25,u=(0,r.useMemo)((function(){var e,t,r="url"===(null==n?void 0:n.type),i=null==n||null===(e=n.name)||void 0===e?void 0:e.split(".").pop();return r?a.url:i?"error"===i?a.warning:"loading"===i?a.loading:["xls","xlsx"].includes(i)?a.excel:["doc","docx"].includes(i)?a.word:["ppt","pptx"].includes(i)?a.ppt:null!==(t=null==a?void 0:a[i])&&void 0!==t?t:a.other:a.other}),[n]);return(0,o.jsx)(i.b,{src:u,style:{width:s,height:c}})}},6958:function(e,n,t){t.d(n,{U:function(){return g}});var r=t(959),i=t(5279),a=t(3557),o=t(3735);function s(e){var n,t="url"===(null==e?void 0:e.type),r=null==e||null===(n=e.name)||void 0===n?void 0:n.split(".").pop();return{title:function(){return(null==e?void 0:e.title)||(null==e?void 0:e.name)||"-"},desc:function(){var n,i,a,o="URL, ".concat(null!==(n=null==e||null===(i=e.wc)||void 0===i?void 0:i.toLocaleString())&&void 0!==n?n:"0"," 字"),s="".concat(null==r?void 0:r.toUpperCase(),", ").concat(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var t=1024,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,i)).toFixed(n))+" "+r[i]}(null!==(a=null==e?void 0:e.size)&&void 0!==a?a:0));return t?o:s}}}var c=t(2535),u="index-module__file___jI2So",l="index-module__title___UMXsv",d=t(1527);function g(e){var n=e.className,t=e.data,g=e.status,h=(0,r.useMemo)((function(){var e=s(t);return{title:e.title(),desc:e.desc()}}),[t]);return(0,d.jsxs)(a.E,{padding:"sm",border:!0,rounded:!0,gap:!0,center:"y",relative:!0,className:"".concat(u," ").concat(n),onClick:function(){return o.A.show("移动端暂不支持预览文件")},children:[(0,d.jsx)(c.a,{data:t}),(0,d.jsxs)(a.E,{hidden:!0,column:!0,children:[(0,d.jsx)(i.G,{ellipsis:!0,bold:!0,className:l,children:h.title}),(0,d.jsx)(i.G,{ellipsis:!0,mode:"tips",children:g||h.desc})]})]})}},7848:function(e,n,t){t.d(n,{z:function(){return V}});var r=t(959),i=t(3946),a=t(3557),o=t(427),s=t(5279),c=t(6830),u=t(205),l=t(1304),d=t(5250),g=t(9306),h=t(9920),m="index-module__avatar___GPblD",f="index-module__kimi___zu_vZ",v=t(1527);function p(e){var n=e.isLatest,t=e.chatting;return n&&t?(0,v.jsx)(a.E,{center:!0,className:m,children:(0,v.jsx)(o.b,{className:f,src:g.xp})}):(0,v.jsx)(o.b,{src:g.qp,className:m})}function M(e){var n=e.shareMode,t=h.C.useState((function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.avatar}));return!t||n?(0,v.jsx)(o.b,{className:m,src:g.ri}):(0,v.jsx)(o.b,{className:m,src:t})}var A=t(4562),I=t(3117),x=t(8890),j="index-module__line____f2SE",N="index-module__list___wUWVr";function _(e){var n,t,r=e.total,i=e.search,o=e.dropdown,c=null!==(n=null==i?void 0:i.msg)&&void 0!==n?n:{},u=c.type,l=c.title,d=void 0===l?"":l,g=c.successNum,h=void 0===g?0:g,m=c.url,f=void 0===m?"":m,p={no_res:(0,v.jsx)(s.G,{children:"Kimi 尝试帮你搜索互联网，但什么也没找到。"}),start:(0,v.jsx)(s.G,{children:"正在尝试为您在互联网搜索相关资料..."}),start_res:(0,v.jsx)(s.G,{children:"开始获取资料..."}),done:(0,v.jsx)(s.G,{children:"一共找到 ".concat(r," 篇资料，正在阅读...")}),answer:(0,v.jsx)(s.G,{children:"找到了 ".concat(r," 篇资料作为参考：")}),get_res:(0,v.jsxs)(a.E,{hidden:!0,center:!0,gap:o?void 0:"xs",children:[(0,v.jsx)(s.G,{children:o?"找到了第 ".concat(h," 篇资料："):"".concat(h,".")}),(0,v.jsx)(s.G,{full:!0,ellipsis:!0,style:{color:"#61AFEF"},onClick:function(){return!o&&x.J.link(f)},children:d})]})};return null!==(t=p[u])&&void 0!==t?t:p.start}function y(e){var n=(e.data||{}).search_plus,t=(0,r.useState)(!1),i=(0,A.Z)(t,2),o=i[0],s=i[1],c=(0,r.useMemo)((function(){var e,t;return{latest:null==n?void 0:n[(null==n?void 0:n.length)-3],total:null!==(e=null==n||null===(t=n.filter((function(e){var n;return"get_res"===(null==e||null===(n=e.msg)||void 0===n?void 0:n.type)})))||void 0===t?void 0:t.length)&&void 0!==e?e:0}}),[n]);return null!=n&&n.length?(0,v.jsxs)(a.E,{column:!0,gap:!0,children:[(0,v.jsxs)(a.E,{center:"y",padding:!0,rounded:!0,className:"".concat(j," press"),onClick:function(){return s((function(e){return!e}))},children:[(0,v.jsx)(_,{dropdown:!0,total:c.total,search:c.latest}),(0,v.jsx)(I.E,{size:20,direction:o?"up":"down"})]}),o&&(0,v.jsx)(a.E,{column:!0,padding:!0,rounded:!0,className:N,children:n.map((function(e,n){return(0,v.jsx)(_,{total:c.total,search:e},n)}))})]}):null}var w=t(4556),k=t(3735),Z=t(4618),D="index-module__icon___hyGOF";function b(e){var n=e.icon,t=e.onClick;return(0,v.jsx)(a.E,{className:"press",onClick:function(e){e.stopPropagation(),t()},children:(0,v.jsx)(o.b,{className:D,src:n})})}function S(e){var n,t=e.data,r=e.isLatest;return(0,v.jsxs)(a.E,{gap:!0,style:{justifyContent:"space-between"},children:[(0,v.jsx)(a.E,{gap:!0,children:(0,v.jsx)(b,{icon:null!=t&&null!==(n=t.status)&&void 0!==n&&n.is_thumb_down?g.UW:g.DV,onClick:function(){var e;return function(e){var n=c.wf.getState().chatId;if(n&&t){var r={cancel:"",up:"thumbs_up_for_model_reply_message_btn",down:"thumbs_down_for_model_reply_message_btn"}[e];r&&Z.UO.click({msh_page_name:"Chat",msh_element_id:r,msh_conversation_id:n}),c.wf.feedback({chat_id:n,segment_id:t.id,action:e})}}(null!=t&&null!==(e=t.status)&&void 0!==e&&e.is_thumb_down?"cancel":"down")}})}),(0,v.jsxs)(a.E,{gap:!0,children:[(0,v.jsx)(b,{icon:g.JG,onClick:function(){var e=c.wf.getState().chatId;Z.UO.click({msh_page_name:"Chat",msh_element_id:"copy_model_reply_message_btn",msh_conversation_id:e}),"string"==typeof(null==t?void 0:t.content)&&x.J.text(null==t?void 0:t.content)}}),(0,v.jsx)(b,{icon:g.BN,onClick:function(){var e=c.wf.getState().chatId;Z.UO.click({msh_page_name:"Chat",msh_element_id:r?"btn_share_message_in_latest_message":"btn_share_message_in_earlier_message",msh_conversation_id:e,msh_message_id:null==t?void 0:t.id}),w.Y.getState().chatting?k.A.show("Kimi 正在说话，请稍等"):u.F.toggleMultiple(t)}})]})]})}var C="margin: 0.6em 0;",T="padding-left: 2em;",E={h1:C,h2:C,h3:C,h4:C,h5:C,h6:C,ul:C+T,ol:C+T,hr:C};function z(e){var n=e.content,t=void 0===n?"":n;return(0,v.jsx)("mp-html",{content:t,markdown:!0,selectable:!0,scrollTable:!0,tagStyle:E})}var L=t(9490),Q={url:"index-module__url___XrCBe",indicator:"index-module__indicator___Keisf",loading:"index-module__loading___lwomp",parsed:"index-module__parsed___hs7J2",failed:"index-module__failed___JoO_9"};function O(e){var n,t,r=e.data,i=null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"",a=(null==r||null===(t=r.url)||void 0===t?void 0:t.status)||"",o=["parsed","failed"].includes(a)?a:"loading";return(0,v.jsxs)(s.G,{userSelect:!0,className:Q.url,onClick:function(){return x.J.link(i)},children:[i,(0,v.jsx)(s.G,{className:"".concat(Q.indicator," ").concat(Q[o])})]})}var U=t(506),B="index-module__view___o_I3G",G="index-module__content___oyub5";function Y(e){var n,t,r,i=e.data,o=e.chatting,c=null!==(n=null!==(t=null==i||null===(r=i.error)||void 0===r?void 0:r.message)&&void 0!==t?t:null==i?void 0:i.content)&&void 0!==n?n:"";return o&&!c?(0,v.jsx)(U.c,{}):(0,v.jsxs)(a.E,{hidden:!0,gap:!0,column:!0,className:B,children:[c&&(0,v.jsx)(z,{content:c}),(null==i?void 0:i.canceled)&&(0,v.jsx)(s.G,{mode:"tips",children:"（用户停止）"})]})}function P(e){var n,t,i=e.data,o=(0,r.useMemo)((function(){var e;return null!=i&&i.content?(0,L.$Q)(null==i||null===(e=i.content)||void 0===e?void 0:e.trim()):[{content:"-"}]}),[null==i?void 0:i.content]);return null!=i&&null!==(n=i.error)&&void 0!==n&&n.message?(0,v.jsx)(s.G,{userSelect:!0,className:G,children:null==i||null===(t=i.error)||void 0===t?void 0:t.message}):(0,v.jsx)(a.E,{wrap:!0,gap:"xs",children:o.map((function(e,n){return e.url?(0,v.jsx)(O,{data:e},n):(0,v.jsx)(s.G,{userSelect:!0,className:G,children:e.content},n)}))})}var R=t(6958),W="index-module__cover___a2vlq",H="index-module__header___K5gx1",J="index-module__main___WaEH3";function K(){return(0,v.jsxs)(a.E,{className:W,children:[(0,v.jsx)(o.b,{className:H,src:g.QM}),(0,v.jsx)(o.b,{className:J,src:g.Nd})]})}var F={main:"index-module__main___KPYok",content:"index-module__content___HJuIh",files:"index-module__files___WeYC6",right:"index-module__right___syTgo",avatar:"index-module__avatar___H3m8O",checkbox:"index-module__checkbox___vDxo6",checked:"index-module__checked___NY6Ii"},V=(0,r.memo)((function(e){var n,t,g=e.data,h=e.index,m=e.isLatest,f=e.shareMode,A=c.wf.useState((function(e){return e.chatMap[e.chatId]})),I=c.wf.useState((function(e){var n;return null!==(n=e.fileMap[e.chatId])&&void 0!==n?n:[]})),x=u.F.useState((function(e){return e.multiple})),j=u.F.useState((function(e){return e.selecteds})),N=(0,r.useMemo)((function(){var e;return j.includes(null!==(e=null==g?void 0:g.id)&&void 0!==e?e:"")}),[null==g?void 0:g.id,j]),_=!(null==g||!g.error),w="user"===(null==g?void 0:g.role),k=(null==g?void 0:g.id)===c.d$.id,Z=!(null!=g&&g.created_at)||!0===(null==g?void 0:g.need_continue),D=!(f||w||k||Z||x),b=(0,r.useMemo)((function(){var e;return null!=I&&I.length&&null!=g&&null!==(e=g.file_refs)&&void 0!==e&&e.length?I.filter((function(e){var n;return null==g||null===(n=g.file_refs)||void 0===n?void 0:n.includes(e.id)})):[]}),[null==g?void 0:g.file_refs,I]),C=null==A||null===(n=A.events_2024_dragon_info)||void 0===n?void 0:n.public_url,T=null==A||null===(t=A.events_2024_dragon_info)||void 0===t?void 0:t.red_packet,E={dragonCover:!w&&1===h&&C,dragonImage:!w&&1===h&&C&&!Z,dragonRedPacket:!w&&3===h&&T&&!Z};return(0,v.jsxs)(a.E,{padding:!0,gap:!0,onClick:function(){return u.F.select(g)},className:N?F.checked:"",children:[x&&!k&&(0,v.jsx)(a.E,{center:!0,className:"".concat(F.checkbox," slidein-left"),children:(0,v.jsx)(i.X,{checked:N})}),(0,v.jsxs)(a.E,{full:!0,gap:!0,className:w?F.right:F.left,style:{position:"relative"},children:[(0,v.jsx)(a.E,{className:F.avatar,style:{opacity:w?0:1},children:(0,v.jsx)(p,{isLatest:!k&&m,chatting:Z})}),E.dragonCover&&(0,v.jsx)(K,{}),(0,v.jsxs)(a.E,{full:!0,hidden:!0,column:!0,gap:!0,className:F.main,children:[(0,v.jsxs)(a.E,{hidden:!0,column:!0,gap:!0,padding:!0,rounded:!0,className:F.content,children:[!w&&!_&&(0,v.jsx)(y,{data:g}),w?(0,v.jsx)(P,{data:g}):(0,v.jsx)(Y,{data:g,chatting:Z}),E.dragonImage&&C&&(0,v.jsx)(o.b,{preview:!0,loadLoading:!0,src:C,mode:"aspectFit",showMenuByLongpress:!0,style:{width:"80%",height:350},onLoad:l.p.scrollToBottom}),E.dragonRedPacket&&T&&(0,v.jsxs)(a.E,{center:"y",gap:"xs",children:[(0,v.jsx)(s.G,{children:"🧧"}),(0,v.jsx)(s.G,{bold:!0,type:"primary",className:"press",style:{textDecoration:"underline"},onClick:function(){return d.G.toWebView(T)},children:"Kimi 龙年限定红包封面点击领取 ～"})]}),D&&(0,v.jsx)(S,{data:g,isLatest:m})]}),!(null==b||!b.length)&&(0,v.jsx)(a.E,{wrap:!0,gap:!0,className:F.files,children:b.map((function(e){return(0,v.jsx)(R.U,{data:e},e.id)}))})]}),(0,v.jsx)(a.E,{className:F.avatar,style:{opacity:w?1:0},children:(0,v.jsx)(M,{shareMode:f})})]})]})}))},506:function(e,n,t){t.d(n,{c:function(){return c}});var r=t(3557),i="index-module__waiting___hNTvP",a="index-module__cell___yyGgB",o=t(1527),s=[0,1,2];function c(){return(0,o.jsx)(r.E,{center:"y",className:i,children:s.map((function(e){return(0,o.jsx)(r.E,{className:a},e)}))})}},7765:function(e,n,t){t.d(n,{d:function(){return h}});var r=t(4217),i=t(9868),a=t(6194),o=t.n(a),s=t(6089),c=t(9459),u=t(1314),l=function(e){return o().getStorageSync(e)},d=function(e,n){o().setStorageSync(e,n)},g=function(e){o().removeStorageSync(e)},h=(0,u.Q)({state:{env:s.Ar?"prod":s.rz,access_token:l("access_token"),refresh_token:l("refresh_token"),visited:l("visited")||!1},actions:function(e){var n=e.getState,t=e.setState;return{saveToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(null==e?void 0:e.access_token)&&d("access_token",e.access_token),(null==e?void 0:e.refresh_token)&&d("refresh_token",e.refresh_token),t(e)},clearToken:function(){g("access_token"),g("refresh_token"),t({access_token:void 0,refresh_token:void 0})},refreshToken:function(){return(0,i.Z)((0,r.Z)().mark((function e(){var t,i,a,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n(),i=t.env,a=t.refresh_token,s=c.X[i],a){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("refresh_token undefined")));case 4:return e.next=6,o().request({url:s+"/api/auth/token/refresh",header:{Authorization:"Bearer ".concat(a)}});case 6:if(200===(u=e.sent).statusCode){e.next=10;break}return 401===u.statusCode&&h.clearToken(),e.abrupt("return",Promise.reject(new Error("Refresh Token Error")));case 10:h.saveToken(u.data);case 11:case"end":return e.stop()}}),e)})))()},getHost:function(){var e=n().env;return{api:c.X[e],socket:c.z[e]}},getChatSocketUrl:function(e){var t=h.getHost(),r=n().access_token;return t.socket+"/api/chat/stream/ws/".concat(e,"?platform=mp&version=").concat(s.i8,"&token=").concat(r)},getASRSocketUrl:function(e){var t=h.getHost(),r=n().access_token;return t.socket+"/api/chat/stream/v2/asr/ws/".concat(e,"?platform=mp&version=").concat(s.i8,"&token=").concat(r)},getFileUploadInfo:function(){var e=h.getHost(),t=n().access_token;return{url:e.api+"/api/file/upload",headers:{Authorization:"Bearer ".concat(t),"x-msh-platform":"mp","x-msh-version":s.i8}}},visit:function(){d("visited",!0)}}}})},9920:function(e,n,t){t.d(n,{C:function(){return l}});var r=t(4217),i=t(9868),a=t(6834),o=t(1314),s=t(5250),c=t(4618),u=t(7765),l=(0,o.Q)({state:{user:void 0,callback:void 0,dragon:!1},actions:function(e){var n=e.getState,t=e.setState;return{verify:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=u.d.getState(),i=r.access_token;i?e():(n||s.G.toLogin(),t({callback:e,dragon:n}))},saveLoginInfo:function(e){u.d.saveToken(e),c.UO.auth.login(e),t({user:null==e?void 0:e.user,dragon:!1});var r=n().callback;r&&(r(),t({callback:void 0}))},logout:function(){var e=n().user;c.UO.auth.logout(e),u.d.clearToken(),l.resetState()},getUser:function(){return(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.h.auth.getUser();case 2:n=e.sent,t({user:n});case 4:case"end":return e.stop()}}),e)})))()}}}})},6830:function(e,n,t){t.d(n,{H3:function(){return h},d$:function(){return g},wf:function(){return m}});var r=t(7749),i=t(6517),a=t(4217),o=t(9868),s=t(6194),c=t.n(s),u=t(6596),l=t(6834),d=t(1314),g={id:"welcome",group_id:"welcome",role:"assistant",created_at:(new Date).toISOString(),content:"Hi，我是 Kimi，很高兴遇见你！<br>应用商店搜索 **“Kimi 智能助手”**<br>随时和 Kimi 聊天！"},h=(0,d.v)({fetcher:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.offset,r=n.size,e.abrupt("return",l.h.chat.listChats({offset:t,size:r}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),m=(0,d.Q)({state:{chatId:"",examples:[],chatMap:{},fileMap:{},segmentMap:{},inputMode:"text"},actions:function(e){var n=e.getState,t=e.setState;return{setChatId:function(e){t({chatId:e})},updateInputMode:function(e){t({inputMode:e})},loadChat:function(e){return(0,o.Z)((0,a.Z)().mark((function n(){var r,o,s,c,u,d,g,h,m,f;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.h.chat.getChat(e);case 2:if(o=n.sent,s=null==o?void 0:o.events_2024_dragon_info,c="2024_dragon_type_",u=null==o||null===(r=o.tags)||void 0===r||null===(r=r.find((function(e){return e.startsWith(c)})))||void 0===r||null===(r=r.split(c))||void 0===r?void 0:r[1],!s||!u){n.next=22;break}return n.next=9,l.h.chat.dragonRedPacket(encodeURIComponent(u));case 9:if(n.t1=d=n.sent,n.t0=null!==n.t1,!n.t0){n.next=13;break}n.t0=void 0!==d;case 13:if(!n.t0){n.next=17;break}n.t2=d,n.next=18;break;case 17:n.t2={};case 18:g=n.t2,h=g.url,m=void 0===h?"":h,s.red_packet=m;case 22:return f=(0,i.Z)((0,i.Z)({},o),{},{events_2024_dragon_info:s}),t((function(n){n.chatMap[e]=f})),n.abrupt("return",f);case 25:case"end":return n.stop()}}),n)})))()},listChatFiles:function(e){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.h.chat.listChatFiles(e);case 2:return r=n.sent,i=r.items,t((function(n){n.fileMap[e]=i})),n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})))()},listChatSegments:function(e,i){return(0,o.Z)((0,a.Z)().mark((function o(){var s,c,d,h,m,f,v,p,M,A,I,x,j,N,_,y,w;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=5;break}if(f=n(),(null==(v=f.segmentMap[e])?void 0:v.total)!==(null==v||null===(m=v.items)||void 0===m?void 0:m.length)){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,l.h.chat.listChatSegments(e,{before:i,last:100});case 7:return p=a.sent,M=p.total,A=void 0===M?0:M,I=p.items,x=void 0===I?[]:I,t((function(n){if(i){var t,a,o=null!==(t=null===(a=n.segmentMap[e])||void 0===a?void 0:a.items)&&void 0!==t?t:[];n.segmentMap[e]={total:A,items:(0,u.Z)([].concat((0,r.Z)(x),(0,r.Z)(o)),"id")}}else n.segmentMap[e]={total:A,items:x}})),j=n(),N=j.chatMap,_=j.segmentMap,y=null!==(s=null===(c=_[e])||void 0===c?void 0:c.items)&&void 0!==s?s:[],w=null==y?void 0:y[y.length-1],y.length>=A&&!1===(null===(d=N[e])||void 0===d?void 0:d.is_example)&&(null===(h=N[e])||void 0===h||!h.events_2024_dragon_info)&&t((function(n){n.segmentMap[e]={total:A+1,items:[g].concat((0,r.Z)(y))}})),a.abrupt("return",{total:A,segments:y,latest:w});case 18:case"end":return a.stop()}}),o)})))()},listChatExamples:function(){return(0,o.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.h.chat.listChatExamples();case 2:return n=e.sent,r=n.items,t({examples:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},selectChat:function(e){return(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return m.setChatId(e),n.next=5,m.loadChat(e);case 5:return n.abrupt("return",Promise.all([m.listChatFiles(e),m.listChatSegments(e)]));case 6:case"end":return n.stop()}}),n)})))()},renameChat:function(e,n){h.updateItem(e,(function(e){e.name=n})),t((function(t){t.chatMap[e]&&(t.chatMap[e].name=n)}))},createChat:function(){var e=arguments;return(0,o.Z)((0,a.Z)().mark((function n(){var t,r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,l.h.chat.createChat((0,i.Z)((0,i.Z)({},t),{},{name:"未命名会话"}));case 3:return r=n.sent,n.next=6,m.selectChat(r.id);case 6:return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})))()},appendChatFiles:function(e,n){t((function(t){var i,a;t.fileMap[e]=null!==(i=t.fileMap[e])&&void 0!==i?i:[];var o=null!==(a=t.fileMap[e])&&void 0!==a?a:[];o.push.apply(o,(0,r.Z)(n))}))},appendChatSegment:function(e,i){var a,o=null!==(a=n().segmentMap[e])&&void 0!==a?a:{},s=o.total,c=void 0===s?0:s,u=o.items,l=void 0===u?[]:u;l.some((function(e){return e.id===i.id}))||t((function(n){n.segmentMap[e]={total:c+1,items:[].concat((0,r.Z)(l),[i])}}))},findChatSegment:function(e,t){for(var r,i=(null!==(r=n().segmentMap[e])&&void 0!==r?r:{}).items,a=void 0===i?[]:i,o=-1,s=a.length-1;s>=0;s--)if(a[s].id===t){o=s;break}return{index:o,segment:a[o]}},updateChatSegment:function(e,n,r){t((function(t){var a,o=m.findChatSegment(e,n).index,s=null===(a=t.segmentMap[e])||void 0===a?void 0:a.items[o];s&&("function"==typeof r?r(s):t.segmentMap[e].items[o]=(0,i.Z)((0,i.Z)({},s),r))}))},feedback:function(e){return(0,o.Z)((0,a.Z)().mark((function n(){var t,r,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.h.chat.feedback(e);case 2:t=e.chat_id,r=e.segment_id,i=e.action,m.updateChatSegment(t,r,(function(e){e.status={is_thumb_up:"up"===i,is_thumb_down:"down"===i}}));case 4:case"end":return n.stop()}}),n)})))()},selectShareChat:function(e){return(0,o.Z)((0,a.Z)().mark((function n(){var t,r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return c().showLoading({title:"正在加载"}),n.next=5,l.h.chat.getChatIdByShare({share_id:e,options:{with_file:!0,with_search:!0,with_url_file:!0}});case 5:r=n.sent,m.selectChat(null!==(t=null==r?void 0:r.chat_id)&&void 0!==t?t:"").finally((function(){return c().hideLoading()}));case 7:case"end":return n.stop()}}),n)})))()}}}})},1304:function(e,n,t){t.d(n,{p:function(){return r}});var r=(0,t(1314).Q)({state:{autoscroll:!1,scrollTop:1e6,scrollBottomVisible:!1},actions:function(e){var n=e.getState,t=e.setState;return{updateAutoscroll:function(e){t({autoscroll:e})},updateScrollBottomVisible:function(e){t({scrollBottomVisible:e})},scrollToBottom:function(){var e=n().scrollTop;t({scrollTop:e+1}),r.updateAutoscroll(!0),r.updateScrollBottomVisible(!1)}}}})},205:function(e,n,t){t.d(n,{F:function(){return x}});var r=t(4217),i=t(9868),a=t(6194),o=t.n(a),s=t(6834),c=t(6089),u=t(1314),l=t(7765),d=t(3700),g=t(9490);function h(e,n){var t,r,i,a,o,s=n.items,c=void 0===s?[]:s,u=315,l=Math.floor(13.75),h=c.slice(0,2).map((function(n,t){var r,i,a=0===t?"q":"a",o=e||"用户",s="user"===n.role?"".concat(o,"："):"Kimi：",c=(null===(r=n.error)||void 0===r?void 0:r.message)||n.content||"",u=(0,g.Qs)(null!==(i=c.trim())&&void 0!==i?i:"-").replace(/\n/g,"").replace(/</g,"").replace(/>/g,"");return{className:a,title:s,text:u,line:Math.ceil(u.length/l)}})),m={name:null===(t=h[0])||void 0===t?void 0:t.className,height:Math.min(null===(r=h[0])||void 0===r?void 0:r.line,6)},f={name:null===(i=h[1])||void 0===i?void 0:i.className,height:Math.min(null!==(a=null===(o=h[1])||void 0===o?void 0:o.line)&&void 0!==a?a:1,6)};return{wxml:"\n      <view class='share'>\n        <image class='bg' src='../assets/images/share-bg.png' />\n        <view class='content'>\n          ".concat(h.map((function(e){return"\n                <text class='title'>".concat(e.title,"</text>\n                <text class='text ").concat(e.className,"'>").concat(e.text,"</text>\n              ")})).join(""),"\n        </view>\n        <image class='btn' src='../assets/images/share-btn.png' />\n      </view>\n    "),style:(0,d.Z)((0,d.Z)({share:{width:u,height:252,padding:20,paddingTop:30},bg:{width:u,height:252,position:"absolute",top:0,left:0},content:{width:275,height:192},btn:{width:u,height:100,position:"absolute",left:0,bottom:-6},title:{width:271,height:24,fontWeight:600,color:"rgba(255, 255, 255, 0.48)"},text:{color:"#fff",width:271,fontSize:20}},m.name,{height:30*m.height}),f.name,{height:30*f.height})}}var m=t(8890),f=t(3735),v=t(4618),p=t(6830),M=t(457),A=t(9920);function I(e){return e.id!==p.d$.id}var x=(0,u.Q)({state:{multiple:!1,selecteds:[]},actions:function(e){var n=e.getState,t=e.setState;return{filterSegments:function(e){var n,t=p.wf.getState(),r=t.chatId,i=(null!==(n=t.segmentMap[r])&&void 0!==n?n:{}).items;return(void 0===i?[]:i).filter((function(n){return e(n)&&I(n)})).map((function(e){return e.id}))},select:function(e){var r=n().multiple;e&&r&&t((function(n){n.selecteds.includes(e.id)?n.selecteds=n.selecteds.filter((function(n){return n!==e.id})):n.selecteds.push(e.id)}))},toggleMultiple:function(e){var n=[];e&&(n=x.filterSegments((function(n){return(null==n?void 0:n.group_id)===(null==e?void 0:e.group_id)}))),t((function(t){t.multiple=!!e,t.selecteds=n}))},checkAllSelected:function(){var e=n().selecteds,t=x.filterSegments((function(){return!0}));return!!t.length&&e.length===t.length},allSelect:function(e){return(0,i.Z)((0,r.Z)().mark((function n(){var i,a,o,c,u,l,d,g,h,m;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return t({selecteds:[]}),n.abrupt("return");case 3:if(a=p.wf.getState(),o=a.chatId,c=a.segmentMap,u=null!==(i=c[o])&&void 0!==i?i:{},l=u.total,d=void 0===l?0:l,g=u.items,d!==(void 0===g?[]:g).length){n.next=8;break}return t({selecteds:x.filterSegments((function(){return!0}))}),n.abrupt("return");case 8:return n.next=10,s.h.chat.listChatSegments(o,{last:d});case 10:h=n.sent,m=h.items,t({selecteds:(void 0===m?[]:m).filter(I).map((function(e){return e.id}))});case 14:case"end":return n.stop()}}),n)})))()},checkShare:function(e){return(0,i.Z)((0,r.Z)().mark((function t(){var i,a,o,c,u,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n(),a=i.selecteds,o=p.wf.getState(),c=o.chatId,null!=(u=x.filterSegments((function(e){return a.includes(null==e?void 0:e.id)})))&&u.length){t.next=6;break}return f.A.show("请选择要分享的内容"),t.abrupt("return");case 6:return t.next=8,s.h.chat.createChatShare({chat_id:c,segment_ids:u});case 8:l=t.sent,e(l);case 10:case"end":return t.stop()}}),t)})))()},shareToWeChat:function(){return(0,i.Z)((0,r.Z)().mark((function e(){var n,t,a,s,c,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.C.getState(),s=a.user,c=p.wf.getState(),u=c.chatId,l=null!=s&&null!==(n=s.name)&&void 0!==n&&n.startsWith("用户")?"":null!==(t=null==s?void 0:s.name)&&void 0!==t?t:"",v.UO.click({msh_page_name:"Chat",msh_element_id:"btn_share_msg_send_to_wechat_chat",msh_conversation_id:u}),e.abrupt("return",new Promise((function(e){x.checkShare(function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var i,a,s,c,u,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=o().getCurrentInstance(),s=a.page,c=null==s||null===(i=s.selectComponent)||void 0===i?void 0:i.call(s,".share-widget"),n.next=4,null==c?void 0:c.renderToCanvas(h(l,t));case 4:return n.next=6,null==c?void 0:c.canvasToTempFilePath();case 6:u=n.sent,d=null==u?void 0:u.tempFilePath,e({imageUrl:null!=d?d:M.sQ,path:"/pages/chat/share?id=".concat(null==t?void 0:t.id),title:l?"".concat(l," 和 Kimi 的聊天记录，发给你看看"):"这是我和 Kimi 的聊天记录，发给你看看"}),x.toggleMultiple();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 5:case"end":return e.stop()}}),e)})))()},copyTextContent:function(){var e,n,t=A.C.getState().user,r=p.wf.getState().chatId,i=(null!=t&&null!==(e=t.name)&&void 0!==e&&e.startsWith("用户")?"":null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"")||"User";v.UO.click({msh_page_name:"Chat",msh_element_id:"btn_share_message_copy_text",msh_conversation_id:r}),x.checkShare((function(e){var n=e.items.map((function(e){var n,t,r="user"===e.role?i:"Kimi",a=(null===(n=e.error)||void 0===n?void 0:n.message)||e.content||"",o=(0,g.Qs)(null!==(t=a.trim())&&void 0!==t?t:"-");return"".concat(r,": ").concat(o)}));m.J.text(n.join("\n"))}))},screenshot:function(){var e=p.wf.getState().chatId;v.UO.click({msh_page_name:"Chat",msh_element_id:"btn_share_msg_generate_img",msh_conversation_id:e}),x.checkShare(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,o().showLoading({title:"正在生成"}),e.next=4,s.h.chat.createChatShareScreenshot({id:t,theme:"dark",device:"mobile"});case 4:if(i=e.sent,a=i.url,!c.tq){e.next=13;break}return e.next=9,o().downloadFile({url:a});case 9:u=e.sent,o().showShareImageMenu({path:u.tempFilePath}),e.next=14;break;case 13:o().previewImage({current:a,urls:[a]});case 14:o().hideLoading();case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},copyLink:function(){var e=p.wf.getState().chatId;v.UO.click({msh_page_name:"Chat",msh_element_id:"btn_share_message_copy_link",msh_conversation_id:e}),x.checkShare(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.id,i=l.d.getHost(),m.J.link("点击链接查看和 Kimi 智能助手的对话 ".concat(i.api,"/share/").concat(t));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}}}})},4556:function(e,n,t){t.d(n,{Y:function(){return p}});var r=t(3700),i=t(4217),a=t(9868),o=t(6517),s=t(6194),c=t.n(s),u=t(6834),l=t(1314),d=t(7765),g=t(9389),h=t(4618),m=t(6830),f=t(1304),v={q:"",a:"",loading:!1,chatting:!1,sendParams:void 0},p=(0,l.Q)({state:(0,o.Z)({chatId:"",socket:void 0},v),actions:function(e){var n=e.getState,t=e.setState;return{resetSegment:function(){t(v)},closeSocket:function(){var e=n().socket;null==e||e.close({code:1e3}),p.resetState()},connectSocket:function(e){return(0,a.Z)((0,i.Z)().mark((function r(){var o,s,u,l;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=n(),s=o.chatId,u=o.socket,l=e===s,!u||(null==u?void 0:u.readyState)!==(null==u?void 0:u.OPEN)||!l){r.next=4;break}return r.abrupt("return",u);case 4:return r.abrupt("return",new Promise(function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r,a){var o,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p.closeSocket(),o=d.d.getChatSocketUrl(e),n.next=4,c().connectSocket({url:o,fail:function(e){return console.error("socket connect error",o,e)}});case 4:(s=n.sent).onOpen((function(){return r(s)})),s.onError((function(e){console.error("socket on error",o,e),p.closeSocket(),a(new Error("Socket Error"))})),s.onMessage((function(e){s.readyState===s.OPEN&&p.stream.receiver(e.data)})),t({chatId:e,socket:s});case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 5:case"end":return r.stop()}}),r)})))()},sendMessage:function(e){return(0,a.Z)((0,i.Z)().mark((function n(){var a,o,s,c,u,l,d,g,m;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.action,o=e.chat_id,s=e.segment_id,c=e.content,u=e.refs,n.next=3,p.connectSocket(o);case 3:l=n.sent,t({loading:!0,chatting:!0,sendParams:e}),d={consult:{chat_id:o,data:{use_search:!0,refs:u,messages:[{role:"user",content:c}]}},continue:{chat_id:o,data:{segment_id:s}}},g="voice"===a?"consult":a,m=(0,r.Z)({action:a},"".concat(g,"_body"),null==d?void 0:d[g]),"continue"===g&&h.UO.chat.continue({msh_conversation_id:o,msh_message_id:s}),f.p.scrollToBottom(),l.send({data:JSON.stringify(m)});case 11:case"end":return n.stop()}}),n)})))()},stream:{finish:function(){return(0,a.Z)((0,i.Z)().mark((function e(){var t,r,a,s,c,l,d,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n(),r=t.sendParams,a=t.q,s=t.a,p.resetSegment(),c=(r||{}).chat_id,l=[a,s],c&&a&&s){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,u.h.chat.listChatSegments(c,{segment_ids:l});case 8:d=e.sent,null==(g=d.items)||g.forEach((function(e){m.wf.updateChatSegment(c,e.id,(0,o.Z)((0,o.Z)({},e),{},{need_continue:!1}))}));case 11:case"end":return e.stop()}}),e)})))()},stop:function(){return(0,a.Z)((0,i.Z)().mark((function e(){var r,a,o,s,c,l,d,g,h,f,v,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),l=c.sendParams,d=c.a,(g=(l||{}).chat_id)&&d){e.next=4;break}return e.abrupt("return");case 4:return h=m.wf.findChatSegment(g,d),f=h.segment,v=null!==(r=null==f||null===(a=f.content)||void 0===a?void 0:a.length)&&void 0!==r?r:0,p=null!==(o=null==f||null===(s=f.content)||void 0===s?void 0:s.slice(Math.max(v-10,0)))&&void 0!==o?o:"",t({loading:!0}),e.next=10,u.h.chat.stopStream({chat_id:g,segment_id:d,index:v,last:p});case 10:m.wf.updateChatSegment(g,d,{canceled:!0});case 11:case"end":return e.stop()}}),e)})))()},receiver:function(e){var t=(0,g.g)(e);if(t){var r=n().sendParams;"auth"!==(null==t?void 0:t.event)||null!=t&&t.status||!r?p.stream.handler(t):d.d.refreshToken().then((function(){return p.sendMessage(r)}))}},handler:function(e){var r,i=null==e?void 0:e.event,a=n(),o=a.sendParams,s=a.q,c=a.a,u=(o||{}).chat_id;if("string"==typeof i&&u){var l={req:function(){if(null!=e&&e.id&&null!=e&&e.group_id&&null!=e&&e.content){var n,r;t((function(n){n.q=e.id,n.loading=!1}));var i=["text"];null!=e&&null!==(n=e.refs)&&void 0!==n&&n.length&&i.push("file"),h.UO.chat.sendMessage({msh_sender:"user",msh_message_type:i,msh_conversation_id:u,msh_message_id:e.id}),m.wf.appendChatSegment(u,{id:e.id,role:"user",group_id:e.group_id,content:e.content,file_refs:null!==(r=null==e?void 0:e.refs)&&void 0!==r?r:[]})}},resp:function(){null!=e&&e.id&&null!=e&&e.group_id&&(t((function(n){n.a=e.id})),m.wf.appendChatSegment(u,{id:e.id,role:"assistant",group_id:e.group_id}))},cmpl:function(){c&&null!=e&&e.text&&m.wf.updateChatSegment(u,c,(function(n){if(!n.canceled){var t=(n.content||"")+(e.text||"");n.content=t,1===t.length&&h.UO.chat.reply({msh_message_type:["text"],msh_conversation_id:u,msh_associate_message_id:s,msh_message_id:c,msh_section_name:"first_word"})}}))},content:function(){var n;s&&null!=e&&null!==(n=e.msg)&&void 0!==n&&n.content&&m.wf.updateChatSegment(u,s,(function(n){var t;n.content=null==e||null===(t=e.msg)||void 0===t?void 0:t.content}))},search_plus:function(){c&&e&&(m.wf.updateChatSegment(u,c,(function(n){var t;n.search_plus=null!==(t=n.search_plus)&&void 0!==t?t:[],n.search_plus.push(e)})),h.UO.chat.reply({msh_message_type:["text"],msh_conversation_id:u,msh_associate_message_id:s,msh_message_id:c,msh_section_name:"search_bubble"}))},rename:function(){null!=e&&e.text&&m.wf.renameChat(u,e.text)},aggregated_messages:function(){var n=e.messages;Array.isArray(n)&&n.forEach((function(e){return p.stream.handler(e)}))},error:function(){m.wf.loadChat(u),p.stream.finish()},stream_done:function(){p.stream.finish(),h.UO.chat.reply({msh_message_type:["text"],msh_conversation_id:u,msh_associate_message_id:s,msh_message_id:c,msh_section_name:"end_word"})}};null==l||null===(r=l[i])||void 0===r||r.call(l)}}}}}})},457:function(e,n,t){t.d(n,{$O:function(){return c},sQ:function(){return s}});var r=t(4618),i=t(1314),a=t(6830),o="Kimi 一个能传文档发网页的 AI 助手",s="/assets/images/share.jpg",c=(0,i.Q)({state:{},actions:function(){return{onShareAppMessage:function(e){var n=a.wf.getState().chatId;return r.UO.app.share({msh_page_name:e,msh_share_destination:"WeChat_Chat",msh_conversation_id:n}),{title:o,path:"/pages/chat/index",imageUrl:s}},onShareTimeline:function(e){var n=a.wf.getState().chatId;return r.UO.app.share({msh_page_name:e,msh_share_destination:"WeChat_Moments",msh_conversation_id:n}),{title:o}}}}})},4713:function(e,n,t){t.d(n,{X:function(){return g}});var r=t(4217),i=t(9868),a=t(6194),o=t.n(a),s=t(6834),c=t(4618),u=t(1314),l=t(5250),d=t(9920),g=(0,u.Q)({state:{wechat:void 0},actions:function(e){var n=e.getState,t=e.setState;return{checkUser:function(){return(0,i.Z)((0,r.Z)().mark((function e(){var n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().login();case 2:return n=e.sent,i=n.code,e.next=6,s.h.wechat.login({code:i});case 6:a=e.sent,t({wechat:a});case 8:case"end":return e.stop()}}),e)})))()},authorize:function(e){return(0,i.Z)((0,r.Z)().mark((function t(){var i,a,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),o=a.wechat,c.UO.click({msh_page_name:"Login",msh_element_id:"mp_login"}),e){t.next=6;break}return l.G.goBack(),d.C.saveLoginInfo(o),t.abrupt("return");case 6:if(null!=o&&null!==(i=o.wx_user)&&void 0!==i&&i.id){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,s.h.wechat.register({code:e,wx_user_id:o.wx_user.id});case 10:u=t.sent,l.G.goBack(),d.C.saveLoginInfo(u);case 13:case"end":return t.stop()}}),t)})))()}}}})},8890:function(e,n,t){t.d(n,{J:function(){return o}});var r=t(6194),i=t.n(r),a=t(3735),o={text:function(e){i().setClipboardData({data:e})},link:function(e){i().setClipboardData({data:e,success:function(){return a.A.show("链接已复制",{icon:"success"})}})}}},9490:function(e,n,t){t.d(n,{LM:function(){return c},so:function(){return d},TH:function(){return s},Qs:function(){return u},$Q:function(){return l}});var r=t(4562),i=t(7749),a={phone:/^1[3456789]\d{9}$/,email:/[a-zA-Z0-9]+([-_.][A-Za-zd]+)*@([a-zA-Z0-9]+[-.])+[A-Za-zd]{2,5}$/,url:/(https?:\/\/[^\s]+(\.[^\s]+){1,})/g,var:/^[a-zA-Z_]\w*$/},o=/<url id="([a-z0-9]+)?" type="url" status="([^<>'"]+)?" title="([^<>'"]+)?" wc="([^<>'"]+)?">([^<>'"]+?)<\/url>/g;function s(e){return'<url id="" type="url" status="" title="" wc="">'.concat(e,"</url>")}function c(e){return e.replace(a.url,(function(e){return s(e)}))}function u(e){return e.replace(o,"$5")}function l(e){var n=(0,i.Z)(e.matchAll(o));if(null==n||!n.length)return[{content:e}];var t=0,a=[];n.forEach((function(n){var i,o=null!==(i=n.index)&&void 0!==i?i:0,s=(0,r.Z)(n,6),c=s[0],u=s[1],l=s[2],d=s[3],g=s[4],h=s[5],m=e.slice(t,o);m&&a.push({content:m}),a.push({content:h,url:{id:u,title:d,wc:Number(g),status:l}}),t=o+c.length}));var s=e.length-t;return s&&a.push({content:e.slice(-s)}),a}function d(e,n){var t=n.value,r=n.cursor,i=r-(t.length-e.length),o=t.slice(i,r);return a.url.test(o)?t.slice(0,r)+" "+t.slice(r):t}},5250:function(e,n,t){t.d(n,{G:function(){return a}});var r=t(6194),i=t.n(r),a={goBack:function(){i().getCurrentPages().length>1?i().navigateBack():i().redirectTo({url:"/pages/chat/index"})},toHome:function(){i().reLaunch({url:"/pages/chat/index"})},toLogin:function(){i().navigateTo({url:"/pages/login/index"})},toChatList:function(){i().navigateTo({url:"/pages/chat/list"})},toWebView:function(e){i().navigateTo({url:"/pages/webview/index?url=".concat(encodeURIComponent(e))})}}},9389:function(e,n,t){function r(e){if("string"!=typeof e)return null;var n=null;try{n=JSON.parse(e.startsWith("data: ")?e.slice(6):e)}catch(e){n=null}return n}t.d(n,{g:function(){return r}})},3735:function(e,n,t){t.d(n,{A:function(){return c}});var r=t(6517),i=t(5826),a=t(6194),o=t.n(a),s=["icon"],c={show:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.icon,a=void 0===t?"none":t,c=(0,i.Z)(n,s);return o().showToast((0,r.Z)({title:e,icon:a},c))}}},4618:function(e,n,t){t.d(n,{UO:function(){return c},dh:function(){return r.Z}});var r=t(2343),i=t(6194),a=t.n(i),o=t(6089);function s(e,n){o.WI||null===r.Z||void 0===r.Z||r.Z.event(e,n)}o.WI||(r.Z.init({app_id:20001731,channel_domain:"https://gator.volces.com",log:!1,auto_report:!0}),r.Z.config({msh_mp_name:"Kimi MiniProgram",msh_mp_version:a().getAccountInfoSync().miniProgram.version}),r.Z.send());var c={app:{closePage:function(e){s("msh_close_page",{msh_page_name:e})},openMaterials:function(){s("msh_mp_wechat_materials")},share:function(e){s("msh_share_application",e)}},auth:{login:function(e){var n;if(!o.WI){var t=null==e||null===(n=e.user)||void 0===n?void 0:n.id;r.Z.config({user_unique_id:t}),s(null!=e&&e.new_user?"msh_regist_submit":"msh_login",{user_unique_id:t,msh_regist_type:"微信",msh_is_success:!0})}},logout:function(e){o.WI||(r.Z.config({user_unique_id:null}),s("msh_logout",{user_unique_id:null==e?void 0:e.id}))},privacy:function(e,n){s(e,{msh_agree:n})}},chat:{sendMessage:function(e){s("msh_sent_message",e)},reply:function(e){s("msh_resove_reply_section",e)},continue:function(e){s("msh_continue_stream_chat",e)}},click:function(e){s("msh_click",e)}}}}]);